<%= simple_form_for @listing do |f| %>
	<% if @listing.errors.any? %>
	<div id="error_explanation">
		<h2>
			<%= pluralize(@listing.errors.count, "error") %> prohibited
			this listing from being saved:
		</h2>
		<ul>
			<% @listing.errors.full_messages.each do |msg| %>
			<li><%= msg %></li>
			<% end %>
		</ul>
	</div>
	<% end %>

	<%= f.input :title %>
	<%= f.input :cost %>
	<%= f.input :description %>
	<div class="form-group">
    <fieldset>
      <% if @categories.present? %>
        <%= f.label 'Category (select one or more categories)' %>
        <%= f.collection_select :category_ids, @categories, :id, :name, {}, {multiple: true,  class: 'form-control'} %>
      <% end %>
      <br/>
      <%= f.fields_for :categories, @new_category do |categories_fields| %>
        <%= categories_fields.label 'or create a new category' %>
        <%= categories_fields.text_field :name, class: 'form-control' %>
      <% end %>
		</fieldset>
  </div>
	<div class="form-group">
	<fieldset>
		<p>
			Vehicle Types
		</p>
		<%= f.fields_for :types do |type| %>
			<%= render 'type_fields', f: type %>
		<% end %>

		<div class="links">
			<%= link_to_add_association '+ add type', f, :types, class: 'btn btn-primary' %>
		</div>
	</fieldset>
</div>
	<%= f.input :contact %>
	<%= f.input :image, as: :file %>
	<%= f.input :address %>
	<%= f.button :submit %>
<% end %>
